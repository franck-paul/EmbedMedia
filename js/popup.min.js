"use strict";dotclear.ready((()=>{Object.assign(dotclear,dotclear.getData("embed_media",!1,!1));const e=document.querySelector("#media-insert-form");if(!e)return;const t=t=>{t?.preventDefault(),t?.stopPropagation();const r=e.querySelector("#media-insert-url").value;if(!r)return void window.alert(dotclear.embed_media.url_empty);const a=Number.parseInt(e.querySelector("#media-insert-maxwidth")?.value),n=Number.parseInt(e.querySelector("#media-insert-maxheight")?.value);dotclear.jsonServicesGet("embedMedia",(a=>{if(!1===a.ret)return t?.preventDefault(),t?.stopPropagation(),void(a?.error?window.alert(`${dotclear.embed_media.request_error} ${a.error}`):window.alert(`${dotclear.embed_media.unknown_error}`));((t,r)=>{const a=window.opener.the_toolbar,{data:n}=a.elements.embedmedia;n.alignment=e.querySelector('input[name="media-insert-alignment"]:checked')?.value,n.url=r,n.m_object=t,n.caption=e.querySelector('input[name="media-insert-caption"]')?.value,a.elements.embedmedia.fncall[a.mode].call(a),window.close()})(a.html,r)}),{url:r,maxwidth:a,maxheight:n},(e=>{}))};document.querySelector("#media-insert-cancel")?.addEventListener("click",(e=>{e?.preventDefault(),window.close()})),document.querySelector("#media-insert-ok")?.addEventListener("click",(e=>{t(e)})),e.addEventListener("submit",(e=>{t(e)})),dotclear.enterKeyInForm("#media-insert-form","#media-insert-ok","#media-insert-cancel")}));
