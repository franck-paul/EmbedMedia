"use strict";dotclear.ready((()=>{Object.assign(dotclear,dotclear.getData("embed_media"));const e=document.querySelector("#media-insert-form");if(!e)return;const r=r=>{const t=e.querySelector("#media-insert-url").value,a=Number.parseInt(e.querySelector("#media-insert-maxwidth")?.value),i=Number.parseInt(e.querySelector("#media-insert-maxheight")?.value);dotclear.jsonServicesGet("embedMedia",(r=>{if(!1===r.ret)return r?.error&&window.alert(`${dotclear.embed_media.request_error+r.error}`),void window.close();((r,t)=>{const a=window.opener.the_toolbar,{data:i}=a.elements.embedmedia;i.alignment=e.querySelector('input[name="media-insert-alignment"]:checked')?.value,i.url=t,i.m_object=r,a.elements.embedmedia.fncall[a.mode].call(a),window.close()})(r.html,t)}),{url:t,maxwidth:a,maxheight:i})};document.querySelector("#media-insert-cancel")?.addEventListener("click",(e=>{e?.preventDefault(),window.close()})),document.querySelector("#media-insert-ok")?.addEventListener("click",(e=>{r()})),dotclear.enterKeyInForm("#media-insert-form","#media-insert-ok","#media-insert-cancel")}));
